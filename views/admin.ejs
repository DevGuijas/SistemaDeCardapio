<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel - Rancho do Cupim</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        :root { --madeira: #3d2b1f; --papel: #f4e4bc; --detalhe: #8b0000; --sucesso: #2d5a27; }
        body { background-color: var(--madeira); background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png'); font-family: 'Special Elite', cursive; padding: 20px; }
        .admin-container { max-width: 1000px; margin: 0 auto; background-color: var(--papel); padding: 30px; border: 8px double var(--madeira); }
        .cadastro-box { background: rgba(0,0,0,0.05); padding: 20px; border: 1px dashed var(--madeira); margin-bottom: 40px; }
        .grid-form { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 3; }
        input, textarea, select { width: 100%; padding: 10px; border: 1px solid #b5a47a; font-family: 'Special Elite'; }
        table { width: 100%; border-collapse: collapse; }
        th { background: var(--madeira); color: var(--papel); padding: 10px; }
        td { padding: 10px; border-bottom: 1px solid #d2b48c; }
        .btn-status { background: none; border: 1px solid #ccc; cursor: pointer; padding: 5px; font-size: 0.7rem; }
        .img-thumb { width: 50px; height: 50px; object-fit: cover; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div style="display: flex; justify-content: space-between;">
            <a href="/">← Ver Cardápio</a>
            <a href="/logout" style="color: var(--detalhe);">Sair</a>
        </div>
        <h1>Painel do Rancho</h1>

        <div class="cadastro-box">
            <form action="/admin/add" method="POST" enctype="multipart/form-data">
                <div class="grid-form">
                    <input type="text" name="titulo" placeholder="Nome do Prato" required>
                    <input type="number" name="preco" step="0.01" placeholder="Preço" required>
                    <select name="categoria" required>
                        <option value="Carnes">Carnes</option>
                        <option value="Acompanhamentos">Acompanhamentos</option>
                        <option value="Bebidas">Bebidas</option>
                    </select>
                    <textarea name="descricao" class="full-width" placeholder="Descrição..." required></textarea>
                    <input type="file" name="foto" class="full-width" required>
                </div>
                <button type="submit" style="background: var(--sucesso); color: white; width: 100%; padding: 10px; margin-top: 10px; cursor: pointer;">CADASTRAR</button>
            </form>
        </div>

        <table>
            <thead><tr><th>Foto</th><th>Item</th><th>Categoria</th><th>Preço</th><th>Status</th><th>Ações</th></tr></thead>
            <tbody>
                <% itens.forEach(item => { %>
                <tr>
                    <td><img src="/uploads/<%= item.imagem %>" class="img-thumb"></td>
                    <td><%= item.titulo %></td>
                    <td><%= item.categoria %></td>
                    <td>R$ <%= item.preco.toFixed(2) %></td>
                    <td>
                        <form action="/admin/status/<%= item.id %>?_method=PUT" method="POST">
                            <button class="btn-status"><%= item.disponivel ? '✅ Ativo' : '❌ Esgotado' %></button>
                        </form>
                    </td>
                    <td>
                        <a href="/admin/edit/<%= item.id %>">Editar</a> |
                        <form action="/admin/delete/<%= item.id %>?_method=DELETE" method="POST" style="display:inline;">
                            <button style="color: red; border:none; background:none; cursor:pointer;">Excluir</button>
                        </form>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>